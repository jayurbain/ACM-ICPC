\documentclass{article}

% Macros to make this problem look like the rest of our problems.
\usepackage{icpc_problem}

% Title of your problem.
\title{G: Ghostly Collisions}

% Who made the problem
\author{Kathryn Traxler}

% Keywords, from a set of standard keywords.
\keywords{simple}

% Anything you want to say about the problem, including how one could solve it
\comments{Given a map consisting of a simple polygon, determine the minimum
rectangular area for a page such that the map can be fully presented, allowing
for a single lopped off piece that is shown separately on the rectangle using
the same orientation and at the same scale.}

% Difficulty on a 1..10 scale.
\difficulty{1}

\begin{document}

\begin{problemDescription}
You're almost free. You've successfully fought your way out of the haunted mansion; 
now the only obstacle remaining is a square field. The field is completely flat, 
so it should be a breeze to cross it, right? Too bad the field is full of ghosts...

When you start (time = 0 seconds), you and each of the ghosts are located at some 
set of integer coordinates (the center of the field is (0,0)). No ghost can start 
at the same position as you or another ghost.  You and the ghosts can only move in 
straight lines parallel to the sides of the field, but you and the ghosts will not 
necessarily all be going in the same direction. All ghosts and you are essentially
point size, and neither the ghosts nor you can change direction once started.
The ghosts will start moving at the same time you do, and you and the ghosts will 
all be moving at the same constant rate (velocity = 1 unit per second).
Ghosts pass right through each other, and doing so does not change their speed 
or direction.

Given the starting positions and directions for you and each of the ghosts, find 
the earliest time at which you will collide with a ghost. If you will have no 
collisions with any ghosts, you are SAFE. 
\end{problemDescription}

\begin{inputDescription}
Input may consist of multiple cases.  Cases may be separated by blank lines
for readability.

The first line of a case contains values $X$ $Y$ $DIR$, where $(X,Y)$
 is your initial position $(-100 <= X, Y <= 100)$ and $DIR$ is the direction 
you will move.

$DIR$ is given as N (north / towards positive Y), S (south / towards negative Y), 
E (east / towards positive X), or W (west / towards negative X).

The second line of a case contains $G$ $(1 <= G <= 2012)$, the number of ghosts on the field. 
$G$ lines follow, each containing $X$ $Y$ $DIR$, the initial position and the direction 
of movement for each ghost (following the same constraints for $X$, $Y$, and $DIR$
 as you).

Following the last case is a line containing 0 0 0 (zeroes).
\end{inputDescription}

\begin{outputDescription}
For each time you try to cross the field, output the earliest time in seconds 
(rounded to one decimal point) at which you will collide with a ghost. If you will 
have no collisions with any ghosts, output SAFE.  Format as in the sample, starting
with the case number.
\end{outputDescription}

\begin{sampleInput}
-3 2 E
2
-2 3 S
-2 0 N

0 0 E
1
3 0 W

1 1 N
1
1 0 N

0 0 0
\end{sampleInput}
\begin{sampleOutput}
Case 1: 1.0
Case 2: 1.5
Case 3: SAFE
\end{sampleOutput}

\end{document}
